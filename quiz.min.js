class Quiz{constructor(){this.modal=document.getElementById('quiz-modal');this.container=document.querySelector('.quiz-container');this.screens=document.querySelectorAll('.quiz-screen');this.progressBar=document.querySelector('.quiz-progress');this.progressFill=document.querySelector('.quiz-progress-fill');this.progressText=document.querySelector('.quiz-progress-text');this.closeBtn=document.querySelector('.quiz-close');this.overlay=document.querySelector('.quiz-overlay');this.currentScreen=1;this.totalScreens=17;this.userName='';this.answers={};this.quizCompleted=!1;this.screenNames={1:'nome',2:'filhos',3:'trabalho',4:'renda',5:'cidade',6:'validacao_cidade',7:'tempo',8:'experiencia',9:'validacao_perfil',10:'margem_lucro',11:'iniciantes_sucesso',12:'investimento',13:'objetivo',14:'medo',15:'roi_simulacao',16:'validacao_medo',17:'decisao',18:'loading',19:'resultado_final'};this.init()}trackEvent(a,b={}){typeof gtag==='function'&&(gtag('event',a,b),console.log(`üìä [GA4] ${a}`,b))}init(){for(const B of document.querySelectorAll('[data-action="open-quiz"]'))B.addEventListener('click',()=>this.open());this.closeBtn?.addEventListener('click',()=>{this.quizCompleted&&this.close()});this.overlay?.addEventListener('click',e=>{this.quizCompleted&&this.close()});let A=document.getElementById('btn-start-quiz'),_=document.getElementById('quiz-name-input');A?.addEventListener('click',()=>{let c=_?.value.trim();c&&c.length>=2?(this.userName=c,this.updateUserNameDisplays(),this.goToScreen(2)):(_?.focus(),_?.classList.add('error'),setTimeout(()=>_?.classList.remove('error'),500))});_?.addEventListener('keypress',e=>{e.key==='Enter'&&A?.click()});for(const C of document.querySelectorAll('.quiz-option'))C.addEventListener('click',()=>{let _a=C.dataset.key,_b=C.dataset.value,_c=parseInt(C.dataset.next);(_a&&_b)&&(this.answers[_a]=_b);_c===9&&this.handleValidationScreen();_c===17&&this.handleFearScreen();_c&&this.goToScreen(_c)});for(const d of document.querySelectorAll('[data-next]'))!d.classList.contains('quiz-option')&&d.addEventListener('click',()=>{let D=parseInt(d.dataset.next);D&&this.goToScreen(D)});this.initNewsCarousel();this.initQuizTicker();this.initFAQ();document.addEventListener('keydown',e=>{if(e.key==='Escape'&&this.modal.classList.contains('active'))this.quizCompleted&&this.close()})}open(){this.modal.classList.add('active');document.body.style.overflow='hidden';this.quizCompleted=!1;this.closeBtn?.classList.add('hidden');this.trackEvent('quiz_start');this.goToScreen(1)}close(){if(!this.quizCompleted&&this.currentScreen>1){let _A=this.screenNames[this.currentScreen]||`tela_${this.currentScreen}`;this.trackEvent('quiz_abandon',{last_step_number:this.currentScreen,last_step_name:_A})}this.modal.classList.remove('active');document.body.style.overflow=''}goToScreen(E){if(E===19){this.handleResultScreenLP();return}for(const aA of this.screens)aA.classList.remove('active');let _B=document.querySelector(`[data-screen="${E}"]`);if(_B){_B.classList.add('active');this.currentScreen=E;this.updateProgress();this.container.scrollTop=0;let aB=this.screenNames[E]||`tela_${E}`;this.trackEvent('quiz_step',{step_number:E,step_name:aB});E===6&&this.handleCityValidation();E===15&&this.handleROIScreen();E===18&&this.handleLoadingScreen()}}updateProgress(){if(this.currentScreen===1||this.currentScreen>=18)this.progressBar.classList.remove('show');else{this.progressBar.classList.add('show');this.progressFill.style.width=`${Math.min(((this.currentScreen-1)/16)*100,100)}%`;this.progressText.textContent=`Etapa ${this.currentScreen-1} de 16`}}updateUserNameDisplays(){for(const aC of document.querySelectorAll('.user-name'))aC.textContent=this.userName}handleValidationScreen(){let aD=this.answers.filhos,aE=this.answers.trabalho,_d='Sua rotina tem desafios reais, mas identificamos um padr√£o interessante: perfis como o seu tendem a ter resultados surpreendentes porque focam na QUALIDADE do tempo.',_e={img:'https://i.pravatar.cc/40?img=32',quote:'"Achei que minha rotina ia me impedir, mas descobri que precisava de 1h focada, n√£o o dia todo. Foi libertador!"',author:'‚Äî Patr√≠cia R.'};let _C=`Excelente ponto, ${this.userName}. ü§î`;if(aE==='dona-casa'&&(aD==='2-3'||aD==='4+')){_C=`Sua for√ßa vem da√≠, ${this.userName} ‚ù§Ô∏è`;_d='Muitas acham que filhos atrapalham, mas nossas alunas provam o contr√°rio: eles s√£o o MOTIVO. Voc√™ n√£o precisa de "tempo sobrando", precisa de uma f√≥rmula que respeite seus intervalos de m√£e.';_e={img:'https://i.pravatar.cc/40?img=16',quote:'"Fa√ßo nos hor√°rios de soneca e √† noite. Cansativo? Sim. Mas pagar a escola deles √† vista... n√£o tem pre√ßo!"',author:'‚Äî Amanda O.'}}else if(aE==='clt'){_C=`O tempo √© seu ativo, ${this.userName} ‚è≥`;_d='Quem trabalha fora tem uma vantagem secreta: Objetividade. Voc√™ n√£o tem tempo a perder, e essa f√≥rmula foi desenhada para render o triplo em 2 horas do que amadores fazem em 8h.';_e={img:'https://i.pravatar.cc/40?img=5',quote:'"Chegava do trabalho e fazia 1h de produ√ß√£o focada. Fiz R$4.800 s√≥ nos fins de semana e noites. √â m√©todo, n√£o milagre."',author:'‚Äî Carla M.'}}else if(aE==='desempregada'){_C=`Seu momento de virada, ${this.userName} üåü`;_d='Pode parecer dif√≠cil agora, mas voc√™ tem algo valioso: Foco Total. Enquanto outras dividem aten√ß√£o, voc√™ pode mergulhar e dominar o mercado da sua regi√£o em semanas.';_e={img:'https://i.pravatar.cc/40?img=23',quote:'"Estava no fundo do po√ßo, devendo tudo. Peguei R$150 com medo. Hoje sustento a casa s√≥ com os doces. A P√°scoa mudou minha vida."',author:'‚Äî Fernanda L.'}}else aE==='autonoma'&&(_C=`Vis√£o de √Åguia, ${this.userName} ü¶Ö`,_d='Voc√™ j√° sabe que renda depende de esfor√ßo inteligente. A "F√≥rmula Chocolate & Lucro" n√£o √© gasto, √© uma nova linha de receita sazonal para injetar caixa r√°pido no seu neg√≥cio.',_e={img:'https://i.pravatar.cc/40?img=33',quote:'"Integrei os ovos no meu sal√£o e vendi para as clientes que j√° tinha. Dobrei meu faturamento de abril sem gastar com an√∫ncio!"',author:'‚Äî Juliana C.'});document.getElementById('validation-title').innerHTML=_C;document.getElementById('validation-text').textContent=_d;let f=document.getElementById('validation-testimonial');f&&(f.querySelector('img').src=_e.img,f.querySelector('p').textContent=_e.quote,f.querySelector('span').textContent=_e.author)}handleCityValidation(){let aF=this.answers.cidade,aH='Sua regi√£o tem um potencial incr√≠vel para vendas de ovos artesanais.',_D={img:'https://i.pravatar.cc/40?img=25',quote:'"Minha cidade √© pequena, mas isso foi minha vantagem. Virei refer√™ncia rapidinho!"',author:'‚Äî Sandra M., Interior de MG'};let aG=`Excelente localiza√ß√£o, ${this.userName}!`;if(aF==='pequena'){aG=`Sua cidade √© uma mina de ouro, ${this.userName}! üèÜ`;aH='Cidades pequenas t√™m uma vantagem SECRETA: Menos concorr√™ncia + Boca a boca mais forte = Voc√™ pode dominar o mercado em semanas. Quem chega primeiro, fica com tudo!';_D={img:'https://i.pravatar.cc/40?img=25',quote:'"Moro numa cidade de 15 mil habitantes. Na primeira P√°scoa vendi pra 80 fam√≠lias. Hoje TODOS me conhecem como a \"mo√ßa do ovo\"."',author:'‚Äî Sandra M., Interior de MG'}}else if(aF==='media'){aG=`Equil√≠brio perfeito, ${this.userName}! ‚ö°`;aH='Cidades m√©dias s√£o o ponto ideal: Mercado grande o suficiente para crescer, mas pequeno o suficiente para voc√™ se destacar. Voc√™ pode construir uma marca forte rapidinho!';_D={img:'https://i.pravatar.cc/40?img=47',quote:'"Minha cidade tem 80 mil habitantes. Comecei atendendo meu bairro, depois viralizei no WhatsApp. Fiz R$12.000 na √∫ltima P√°scoa!"',author:'‚Äî Renata K., Itajub√°/MG'}}else if(aF==='grande'){aG=`Mercado gigante te esperando, ${this.userName}! üåÜ`;aH='Cidade grande = Demanda infinita. Com a estrat√©gia certa de nichos (escrit√≥rios, condom√≠nios, igrejas), voc√™ pode criar uma clientela fiel que te garante vendas todo ano!';_D={img:'https://i.pravatar.cc/40?img=38',quote:'"Mora numa cidade de 300 mil. Foquei em empresas e condom√≠nios. Fechei encomendas de 50+ ovos por cliente. O lucro foi absurdo!"',author:'‚Äî Patr√≠cia F., Ribeir√£o Preto/SP'}}else aF==='capital'&&(aG=`Potencial ilimitado na sua m√£o, ${this.userName}! üèôÔ∏è`,aH='Capitais t√™m um mercado ENORME para produtos artesanais premium. As pessoas pagam at√© 3x mais por algo feito com amor. Voc√™ tem milh√µes de potenciais clientes a poucos km!',_D={img:'https://i.pravatar.cc/40?img=41',quote:'"Moro em S√£o Paulo. Achei que ia ter muita concorr√™ncia, mas o mercado √© T√ÉO grande que vendi tudo antes da P√°scoa. Fiz R$18.000 trabalhando de casa!"',author:'‚Äî Juliana S., S√£o Paulo/SP'});document.getElementById('city-validation-title').innerHTML=aG;document.getElementById('city-validation-text').textContent=aH;let _E=document.getElementById('city-testimonial');_E&&(_E.querySelector('img').src=_D.img,_E.querySelector('p').textContent=_D.quote,_E.querySelector('span').textContent=_D.author)}handleFearScreen(){let aI=this.answers.medo,aJ={'nao-vender':{title:`Esse medo √© um bom sinal, ${this.userName} ÔøΩÔ∏è`,text:'Ele mostra responsabilidade. Mas a verdade √© que em tempos de crise, as pessoas cortam viagens, mas N√ÉO CORTAM o chocolate. A demanda reprimida para 2026 √© gigante, e voc√™ s√≥ precisa estar posicionada.',img:'https://i.pravatar.cc/40?img=44',quote:'"Eu tremia de medo de sobrar ovo. Segui o script de antecipa√ß√£o e vendi tudo ANTES de produzir. Fiquei chocada!"',author:'‚Äî Luciana A.'},'nao-ficar-bom':{title:`O perfeccionismo te protege, mas... `,text:'Entendo seu receio. A boa not√≠cia? Confeitaria n√£o √© "dom", √© qu√≠mica e processo. Se voc√™ sabe ler e seguir instru√ß√µes, o resultado √© matem√°tico. Seus ovos V√ÉO ficar lindos porque a f√≥rmula n√£o deixa errar.',img:'https://i.pravatar.cc/40?img=36',quote:'"Achava que tinha m√£o pesada. O guia de temperagem √© t√£o visual que at√© minha filha de 10 anos conseguiu fazer casca brilhante!"',author:'‚Äî Camila R.'},'nao-dar-conta':{title:`N√£o tente ser a Mulher Maravilha ‚Äç‚ôÄÔ∏è`,text:'Voc√™ n√£o precisa dar conta de tudo sozinha, s√≥ precisa de ORGANIZA√á√ÉO. A f√≥rmula tem um Cronograma de Produ√ß√£o que te diz: "Hoje fa√ßa X, amanh√£ Y". Assim voc√™ produz muito sem virar noite.',img:'https://i.pravatar.cc/40?img=29',quote:'"Com o calend√°rio, parei de correr igual barata tonta. Trabalhei tranquila e ainda tive tempo pra fam√≠lia no domingo de P√°scoa."',author:'‚Äî Amanda O.'},'perder-dinheiro':{title:`Vamos falar de Matem√°tica, ${this.userName} üßÆ`,text:'Medo financeiro se resolve com c√°lculo. Ovos artesanais t√™m margem de 300%. Se voc√™ vender 3 ovos, j√° paga o curso e os materiais iniciais. O resto √© lucro puro. O risco √© matematicamente quase zero.',img:'https://i.pravatar.cc/40?img=48',quote:'"Morria de medo de investir. Comecei com 1 barra de chocolate. Vendi, comprei 2. Vendi, comprei 4. Transformei R$50 em R$3.000 em um m√™s."',author:'‚Äî Fernanda L.'},'sem-medo':{title:`Sua mentalidade j√° venceu üèÜ`,text:'Quem elimina o medo da equa√ß√£o sai na frente de 99% das pessoas. Voc√™ tem a atitude certa. Agora s√≥ precisa da ferramenta certa (a F√≥rmula) para transformar essa coragem em dinheiro no bolso.',img:'https://i.pravatar.cc/40?img=33',quote:'"Eu sabia que ia dar certo, s√≥ n√£o sabia como. O curso foi o mapa do tesouro que eu precisava pra explodir de vender."',author:'‚Äî Juliana C.'}},aK=aJ[aI]||aJ['sem-medo'];document.getElementById('fear-title').innerHTML=aK.title;document.getElementById('fear-text').textContent=aK.text;document.getElementById('fear-avatar').src=aK.img;document.getElementById('fear-quote').textContent=aK.quote;document.getElementById('fear-author').textContent=aK.author}handleROIScreen(){let aL=this.answers.investimento,aM={'menos100':{inv:75,prod:5,vendas:475,lucro:400,percent:533},'100a200':{inv:150,prod:10,vendas:950,lucro:800,percent:533},'200a400':{inv:300,prod:20,vendas:1900,lucro:1600,percent:533},'mais400':{inv:450,prod:30,vendas:2850,lucro:2400,percent:533}},v=aM[aL]||aM['100a200'];document.getElementById('roi-invest').innerHTML=`<span style="font-size:0.9em; display:block; color:#666; font-weight:400; margin-bottom:4px;">Custo Material</span>R$ ${v.inv}`;document.getElementById('roi-prod').textContent=`${v.prod} ovos`;document.getElementById('roi-vendas').textContent=`R$ ${v.vendas.toLocaleString('pt-BR')}`;document.getElementById('roi-lucro').textContent=`R$ ${v.lucro.toLocaleString('pt-BR')}`;document.getElementById('roi-percent').textContent=`+${v.percent}% de retorno sobre material`}handleLoadingScreen(){let aN=document.querySelectorAll('.loading-item');for(const[aO,aP] of aN.entries()){let aQ=parseInt(aP.dataset.delay)||aO*1500;setTimeout(()=>aP.classList.add('active'),aQ);setTimeout(()=>{aP.classList.remove('active');aP.classList.add('done');aP.querySelector('i').className='ph ph-check-circle'},aQ+1200)}setTimeout(()=>this.goToScreen(19),6000)}handleResultScreenLP(){this.quizCompleted=!0;this.close();this.trackEvent('quiz_complete',{user_name:this.userName,trabalho:this.answers.trabalho||'not_set',filhos:this.answers.filhos||'not_set',cidade:this.answers.cidade||'not_set',tempo:this.answers.tempo||'not_set',medo:this.answers.medo||'not_set'});let aR=document.getElementById('oferta-desbloqueada');if(aR){aR.classList.remove('hidden');this.generatePersonalHeadline();this.generatePotentialMath();this.generateProfileValidation();this.generateObjectionBreaker();let aS=document.getElementById('user-name-transition');aS&&(aS.textContent=this.userName);for(const aT of document.querySelectorAll('[data-action="open-quiz"]')){aT.innerHTML='<span>Liberar Acesso Agora</span><i class="ph ph-lock-key-open"></i>';aT.classList.add('btn-pulsing');let aU=aT.cloneNode(!0);aT.parentNode.replaceChild(aU,aT);aU.addEventListener('click',e=>{e.preventDefault();window.location.href='https://pay.cakto.com.br/f5isonf_753149'})}setTimeout(()=>{let aV=20,aW=aR.getBoundingClientRect().top,aX=aW+window.pageYOffset-aV;window.scrollTo({top:aX,behavior:'smooth'})},300)}}generatePersonalHeadline(){let aY=this.answers.filhos,aZ=this.answers.trabalho,bA=this.answers.tempo,bB='',F='';if(aY==='nao')bB='sem filhos';else if(aY==='1')bB='m√£e de 1';else if(aY==='2-3')bB='m√£e de 2 ou 3';else aY==='4+'&&(bB='super m√£e de 4+');let bC='';if(aZ==='clt')bC='que trabalha fora';else if(aZ==='autonoma')bC='que j√° empreende';else if(aZ==='dona-casa')bC='que cuida da casa';else aZ==='desempregada'&&(bC='que busca uma virada');if(bA==='menos1h')F='e tem rapidinho por dia';else if(bA==='1a2h')F='e tem 1h a 2h por dia';else if(bA==='2a4h')F='e tem umas 3h por dia';else bA==='mais4h'&&(F='e pode focar mais de 4h');let g=document.getElementById('result-headline-personal');g&&(g.textContent=`${this.userName}, ${bB}, ${bC} ${F}...`)}generatePotentialMath(){let bD={'menos1h':{ovos:2,labelTempo:'1h'},'1a2h':{ovos:4,labelTempo:'2h'},'2a4h':{ovos:8,labelTempo:'3h'},'mais4h':{ovos:12,labelTempo:'4h+'}},bE=bD[this.answers.tempo]||bD['1a2h'],bF=35,bH=bE.ovos*bG,_f=bH*bF;(this.answers.cidade==='capital'||this.answers.cidade==='grande')&&(bF=45);let bG=25;document.getElementById('result-min-new').textContent=`R$ ${Math.round(_f*0.9).toLocaleString('pt-BR')}`;document.getElementById('result-max-new').textContent=`R$ ${Math.round(_f*1.2).toLocaleString('pt-BR')}`;document.getElementById('magic-context').textContent=`trabalhando ${bE.labelTempo} por dia na P√°scoa`;document.getElementById('math-production').textContent=`Com ${bE.labelTempo}/dia voc√™ faz ~${bE.ovos} ovos`;document.getElementById('math-total').textContent=`Em ${bG} dias = ${bH} ovos produzidos`;document.getElementById('math-profit').textContent=`A R$ ${bF} de lucro cada = R$ ${_f.toLocaleString('pt-BR')}`}generateProfileValidation(){let bI=this.answers.experiencia,bJ='',bK=[];bI==='zero'||bI==='familia'?(bJ='Voc√™ est√° no grupo que mais cresce ‚Äî iniciantes t√™m 34% mais chances de seguir a f√≥rmula certinha pois n√£o t√™m \'v√≠cios\' de produ√ß√£o.',bK=['Mente Aberta','Curva de Aprendizado R√°pida','Perfil Executor']):(bJ='Voc√™ j√° tem a base, o que √© excelente! Seu desafio agora n√£o √© \'aprender a fazer\', e sim \'aprender a escalar\' e vender com lucro m√°ximo.',bK=['Base T√©cnica','Potencial de Escala','L√≠der de Mercado']);document.getElementById('profile-validation-text').textContent=bJ;for(let i=0;i<3;i++){const bL=document.getElementById(`profile-badge-${i+1}`);(bL&&bK[i])&&(bL.querySelector('span').textContent=bK[i])}}generateObjectionBreaker(){let bM=this.answers.medo,bN={'nao-vender':{fear:'"E se eu fizer e n√£o vender?"',stat:'83%',label:'das alunas fazem a primeira venda em 7 dias',text:'A f√≥rmula inclui scripts de "Venda Antecipada". Voc√™ vende primeiro e produz depois, eliminando 100% do risco de preju√≠zo.'},'nao-ficar-bom':{fear:'"E se meus ovos ficarem feios?"',stat:'100%',label:'visual profissional seguindo o gabarito',text:'Confeitaria n√£o √© dom, √© t√©cnica. A f√≥rmula tem "Gabaritos de Decora√ß√£o" que voc√™ coloca do lado e copia. Imposs√≠vel ficar feio se seguir.'},'nao-dar-conta':{fear:'"E se eu n√£o der conta?"',stat:'2h',label:'por dia √© o suficiente para faturar alto',text:'Voc√™ n√£o precisa virar a noite. O "Cronograma Anti-Caos" te diz exatamente o que fazer em cada bloco de tempo para produzir muito sem se matar.'},'perder-dinheiro':{fear:'"E se eu perder dinheiro?"',stat:'300%',label:'√© a margem de lucro m√©dia de um ovo',text:'A matem√°tica joga a seu favor. Vendendo apenas 3 ovos voc√™ j√° pagou seu investimento inicial. O resto √© lucro puro no bolso.'},'sem-medo':{fear:'"S√≥ preciso do caminho certo"',stat:'7',label:'passos separam voc√™ da sua primeira venda',text:'Voc√™ j√° tem a coragem, e isso √© o mais dif√≠cil. Agora eu vou te dar o MAPA. √â s√≥ seguir as coordenadas e coletar o resultado.'}},bO=bN[bM]||bN['nao-vender'];document.getElementById('objection-fear').innerHTML=`<strong>${bO.fear}</strong>`;let bP=document.getElementById('objection-answer');bP.querySelector('.stat-big').textContent=bO.stat;bP.querySelector('.stat-label').textContent=bO.label;document.getElementById('objection-explanation').textContent=bO.text}initNewsCarousel(){let bQ=document.querySelector('.news-carousel-track'),bR=document.querySelectorAll('.news-carousel-dots .dot');if(!bQ||!bR.length)return;bQ.addEventListener('scroll',()=>{let bS=bQ.scrollLeft,bT=bQ.querySelector('.news-slide')?.offsetWidth||260,bU=Math.round(bS/(bT+16));for(const[i,bV] of bR.entries())bV.classList.toggle('active',i===bU)})}initQuizTicker(){let bW=document.querySelectorAll('.news-ticker-item');if(!bW.length)return;let bX=0;setInterval(()=>{bW[bX].classList.remove('active');bX=(bX+1)%bW.length;bW[bX].classList.add('active')},3000)}initFAQ(){for(const bY of document.querySelectorAll('.faq-item'))bY.querySelector('.faq-question')?.addEventListener('click',()=>{let bZ=bY.classList.contains('active');for(const i of document.querySelectorAll('.faq-item')){i.classList.remove('active');i.querySelector('.faq-question')?.setAttribute('aria-expanded','false')}!bZ&&(bY.classList.add('active'),bY.querySelector('.faq-question')?.setAttribute('aria-expanded','true'))})}}document.addEventListener('DOMContentLoaded',()=>new Quiz);
